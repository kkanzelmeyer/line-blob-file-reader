!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lineBlobFileReader=t():e.lineBlobFileReader=t()}(this,function(){return function(e){function t(i){if(s[i])return s[i].exports;var o=s[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),o=function(){function e(t,i,o){s(this,e),this.file=t,this._setDefaults=this._setDefaults.bind(this),this._readBlob=this._readBlob.bind(this),this._processBlob=this._processBlob.bind(this),this.readFile=this.readFile.bind(this),this.readFirstBlob=this.readFirstBlob.bind(this),this.readLastBlob=this.readLastBlob.bind(this),this.readReverse=!1,this.defaults={chunkSize:i||102400,offset:0,objectCount:0,progress:0,chunksRead:0,delimiter:o||"\n"}}return i(e,[{key:"_setDefaults",value:function(){var e=this.defaults,t=e.chunkSize,s=e.offset,i=e.objectCount,o=e.progress,r=e.chunksRead,n=e.delimiter;this.chunkSize=t,this.offset=s,this.objectCount=i,this.progress=o,this.chunksRead=r,this.delimiter=n,this.fr=new FileReader,this.fr.onerror=function(){console.debug("Error reading file =(")}}},{key:"_readBlob",value:function(e){var t=this.file,s=this.offset,i=this.fr,o=this.offset+this.chunkSize;if(o>t.size&&(this.chunkSize=o-t.size,console.debug("Last chunk of data")),s>=t.size)return console.debug("End of file"),console.debug("Object count: "+this.objectCount),console.debug("Chunks Read: "+this.chunksRead),void e({},100,!0);var r=t.slice(s,o);i.readAsText(r)}},{key:"_processBlob",value:function(e){var t=this.file,s=this.fr,i=this.delimiter,o=s.result,r=this.readReverse?o.indexOf(i)+1:o.lastIndexOf(i);if(r===-1)return console.debug("No delimiter found"),void console.debug(o);var n=this.readReverse?""+o.substring(r):""+o.substring(0,r);this.progress=Math.round(this.offset/t.size*100),e(n,this.progress),this.objectCount+=dataObject.length,this.offset+=r+1,this.chunksRead+=1}},{key:"readFile",value:function(e){var t=this;console.debug("reading file"),this._setDefaults(),this.fr.onload=function(){t._processBlob(e),t._readBlob(e)},this._readBlob(e)}},{key:"readFirstBlob",value:function(e){var t=this;console.debug("reading first file chunk"),this._setDefaults(),this.fr.onload=function(){t._processBlob(e)},this._readBlob()}},{key:"readLastBlob",value:function(e){var t=this;console.debug("reading last file chunk"),this._setDefaults(),this.offset=this.file.size-this.chunkSize,this.readReverse=!0,this.fr.onload=function(){t._processBlob(e)},this._readBlob()}}]),e}();t["default"]=o}])});
//# sourceMappingURL=line-blob-file-reader.min.js.map
